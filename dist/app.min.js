function formatString(a,b){return a.replace(/\{([^\}]*)\}/gm,function(){return null!=b[arguments[1]]?b[arguments[1]]:""})}!function(a){a.fn.NavBar=function(){return this.each(function(){var b=a(this);b.on("click",".js-openMenu",function(a){a.stopPropagation(),b.toggleClass("is-open")}),b.click(function(){b.hasClass("is-open")&&b.removeClass("is-open")}),b.on("click",".ms-NavBar-item:not(.is-disabled)",function(c){var d=b.find(".ms-NavBar-item.ms-NavBar-item--search .ms-TextField-field");c.stopPropagation(),0===a(this).children(".ms-NavBar-link").length&&c.preventDefault(),a(this).siblings(".ms-NavBar-item").removeClass("is-selected"),d.length>0&&0===d.val().length&&a(".ms-NavBar-item.ms-NavBar-item--search").removeClass("is-open").find(".ms-TextField-field").blur(),a(this).hasClass("ms-NavBar-item--hasMenu")?(a(this).children(".ms-ContextualMenu:first").toggleClass("is-open"),a(this).toggleClass("is-selected")):(a(this).addClass("is-selected"),b.removeClass("is-open").find(".ms-ContextualMenu").removeClass("is-open")),a(this).hasClass("ms-NavBar-item--search")&&(a(this).addClass("is-open"),a(this).find(".ms-TextField-field").focus(),b.find(".ms-ContextualMenu:first").removeClass("is-open"))}),b.on("click",".ms-NavBar-item .ms-ContextualMenu",function(c){c.stopPropagation(),a(this).removeClass("is-open"),b.removeClass("is-open").find(".ms-NavBar-item--hasMenu").removeClass("is-selected")}),a(document).on("click","html",function(a){var c=b.find(".ms-NavBar-item.ms-NavBar-item--search .ms-TextField-field");b.find(".ms-NavBar-item").removeClass("is-selected").find(".ms-ContextualMenu").removeClass("is-open"),c.length>0&&0===c.val().length&&b.find(".ms-NavBar-item.ms-NavBar-item--search").removeClass("is-open").find(".ms-TextField-field").blur()})})}}(jQuery);var fabric=fabric||{};fabric.Spinner=function(a,b){function c(){l=setInterval(function(){for(var a=t.length;a--;)g(t[a])},u)}function d(){clearInterval(l)}function e(){"sixteen"===q?(o=s,n=16):(o=r,n=8),k(),f(),c()}function f(){for(var a,b=n;b--;)for(a=t.length;a--;)g(t[a])}function g(a){var b;a.j<n?b=Math.floor(a.j/(n/2))?h(a.element)-2/n:h(a.element)+2/n:(a.j=0,b=2/n),i(a.element,b),a.j++}function h(a){return parseFloat(window.getComputedStyle(a).getPropertyValue("opacity"))}function i(a,b){a.style.opacity=b}function j(){var a=document.createElement("div"),b=parseInt(window.getComputedStyle(m).getPropertyValue("width"),10);return a.className="ms-Spinner-circle",a.style.width=a.style.height=b*o+"px",a}function k(){"ms-Spinner"!==p.className?(m=document.createElement("div"),m.className="ms-Spinner",p.appendChild(m)):m=p;for(var a,b=m.clientWidth,c=m.clientHeight,d=0,e=b*o,f=2*Math.PI/n,g=n,h=.5*(b-e);g--;){var i=j(),k=Math.round(.5*b+h*Math.cos(d)-.5*i.clientWidth)-.5*e,l=Math.round(.5*c+h*Math.sin(d)-.5*i.clientHeight)-.5*e;m.appendChild(i),i.style.left=k+"px",i.style.top=l+"px",d+=f,a={element:i,j:g},t.push(a)}}var l,m,n,o,p=a,q=b||"eight",r=.18,s=.1,t=[],u=100;return e(),{start:c,stop:d}};var app=angular.module("footballApp",["ngResource","ui.router","ngAnimate","footballApp.controllers","footballApp.servies","templates-dist","LocalStorageModule"]);angular.module("footballApp.controllers",[]),angular.module("footballApp.servies",["ngResource"]),app.config(["$stateProvider",function(a){a.state("teams",{url:"/teams",views:{main:{controller:"TeamsController",templateUrl:"app/templates/teams.html"}}}).state("team",{url:"/team/:id",views:{main:{controller:"TeamController",templateUrl:"app/templates/team.html"}}})}]),app.run(["$rootScope","$state","$timeout","localStorageService","alertService",function(a,b,c,d,e){$(document).ready(function(){var f=$("#spinner-container"),g=fabric.Spinner(f[0],"sixteen");g.start(),c(function(){_.isEmpty(b.current.name)&&(_.isEmpty(d.get("selectedTeam"))?b.go("teams"):(b.go("team",{id:d.get("selectedTeam")}),e.add("info","Welcome Back!","hello",2e3)))}),a.$on("$stateChangeSuccess",function(a,b,c){"team"==b.name&&d.set("selectedTeam",c.id)})})}]),google.charts.load("43",{packages:["bar","corechart"]}),google.setOnLoadCallback(function(){angular.bootstrap(document.body,["footballApp"])}),angular.module("footballApp.servies").factory("alertService",["$rootScope","$timeout",function(a,b){function c(b){return a.alerts.splice(b,1)}function d(b){return c(a.alerts.indexOf(b))}var e={};return a.alerts=[],a.closeAlert=d,e.add=function(c,d,e,f){var g=_.find(a.alerts,function(a){return a.id==e});_.isEmpty(g)?(g={type:c,msg:d,id:e},a.alerts.push(g)):(g.type=c,g.msg=d),f&&b(function(){a.closeAlert(g)},f)},e.clear=function(){a.alerts=[]},e}]),angular.module("footballApp.servies").factory("teamService",["$resource",function(a){return a("/content",null,{getTeams:{method:"GET",url:"https://feedmonster.onefootball.com/feeds/il/en/competitions/9/1231/teamsOverview.json",isArray:!1},getTeamById:{method:"GET",url:"https://vintagemonster.onefootball.com/api/teams/en/:id.json",params:{id:"@id"},isArray:!1},getTeamStats:{method:"GET",url:"https://vintagemonster.onefootball.com/api/season-stats/teams/en/:id/:seasonId.json?games_n=100",params:{id:"@id",seasonId:"@seasonId"},isArray:!1}})}]),angular.module("footballApp.controllers").controller("GamesSummaryController",["$scope","alertService","$timeout","$stateParams",function(a,b,c,d){a.chart=null,a.initialize=function(b){b.then(function(b){var c=b.data;_.forEach(c.games,function(b){switch(b.resultStatus){case"win":a.config.data[1][1]++;break;case"draw":a.config.data[2][1]++;break;case"defeat":a.config.data[3][1]++}});var b=google.visualization.arrayToDataTable(a.config.data);a.chart=new google.visualization.PieChart($("#GamesSummaryChart")[0]),a.chart.draw(b,a.config.options)})},a.$on("$destroy",function(){null!=a.chart&&(a.chart.clearChart(),google.visualization.events.removeAllListeners(a.chart))}),a.config={data:[["Result","Count"],["Win",0],["Drawn",0],["Defeat",0]],options:{pieSliceText:"none",tooltip:{trigger:"none"},pieHole:.4,height:400,legend:{position:"bottom",textStyle:{fontSize:16}}}}}]),angular.module("footballApp.controllers").controller("GroupPointsController",["$scope","$stateParams",function(a,b){a.chart=null,a.initialize=function(c){c.then(function(c){function d(){var a=$("#GroupPointsChart").find("svg"),b=a.find("path");b[e].setAttribute("fill","#FF9900")}var e,f=c.data;_.forEach(f.groups[0].ranking,function(c,d){var f=[c.team.name,c.team.teamStats.points,[c.team.teamStats.points]];c.team.id==b.id&&(e=d),a.config.data.push(f)});var c=google.visualization.arrayToDataTable(a.config.data);a.chart=new google.charts.Bar($("#GroupPointsChart")[0]),a.chart.draw(c,google.charts.Bar.convertOptions(a.config.options)),google.visualization.events.addListener(a.chart,"ready",d),google.visualization.events.addListener(a.chart,"select",d),google.visualization.events.addListener(a.chart,"onmouseover",d)})},a.$on("$destroy",function(){null!=a.chart&&(a.chart.clearChart(),google.visualization.events.removeAllListeners(a.chart))}),a.config={data:[["","Points",{role:"annotation"}]],options:{height:700,fontName:'"Segoe UI Light WestEuropean","Segoe UI Light","Segoe WP Light","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif',legend:{position:"none"},bar:{groupWidth:"80%"},axisTitlesPosition:"none",hAxis:{gridlines:{color:"transparent"},textStyle:{color:"transparent"}},bars:"horizontal"}}}]),angular.module("footballApp.controllers").controller("NavigationController",["$scope","$state",function(a,b){$.fn.NavBar&&$(".ms-NavBar").NavBar(),a.state=b}]),angular.module("footballApp.controllers").controller("TeamController",["$scope","teamService","$stateParams","alertService","$q","$log","$rootScope",function(a,b,c,d,e,f,g){function h(){return _.isEmpty(c)||_.isEmpty(c.id)?null:c.id}function i(a){return a.data.team.matches.last.seasonId}function j(a){return a.data.team.name}function k(b){a.statistics.resolve(b),a.ready=!0,g.loading=!1}function l(c){a.name=j(c),b.getTeamStats({id:h(),seasonId:i(c)}).$promise.then(k,m)}function m(a){f.error(formatString('Retrieval failed for "{id}" {error}',{id:h(),error:a})),d.add("error","Something went wrong :(","TeamController"),g.loading=!1}a.ready=!1,g.loading=!0,a.statistics=e.defer(),a.statisticsPromise=a.statistics.promise,a.name="Resolving...",null!=h()?b.getTeamById({id:h()}).$promise.then(l,m):d.add("error","Something went wrong :(","TeamController")}]),angular.module("footballApp.controllers").controller("TeamsController",["$scope","$rootScope","teamService","alertService","$state","$log",function(a,b,c,d,e,f){b.loading=!0,a.data=c.getTeams(),a.data.$promise.then(function(c){a.teams=c.teams,b.loading=!1},function(a){f.error(a),d.add("error","Something went wrong :(")}),a.selectTeam=function(a){e.go("team",{id:a})}}]),angular.module("templates-dist",["app/templates/alerts.html","app/templates/navigationBar.html","app/templates/team.html","app/templates/teams.html"]),angular.module("app/templates/alerts.html",[]).run(["$templateCache",function(a){a.put("app/templates/alerts.html",'<div class="alerts">\n    <div class="ms-Callout ms-Callout--peek" ng-repeat="alert in alerts">\n        <div class="ms-Callout-main">\n            <div class="ms-Callout-header"\n'+"                 ng-class=\"{'ms-bgColor-error': alert.type == 'error', 'ms-bgColor-info': alert.type == 'info'}\">\n                <p class=\"ms-Callout-title\"\n                   ng-class=\"{'ms-fontColor-error': alert.type == 'error', 'ms-fontColor-info': alert.type == 'info'}\">\n                    {{alert.msg}}</p>\n                <button class=\"ms-Callout-close\" ng-click=\"closeAlert(alert)\">\n                    <i class=\"ms-Icon ms-Icon--x\"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>")}]),angular.module("app/templates/navigationBar.html",[]).run(["$templateCache",function(a){a.put("app/templates/navigationBar.html",'<div class="ms-NavBar" ng-controller="NavigationController">\n    <div class="ms-NavBar-openMenu js-openMenu">\n        <i class="ms-Icon ms-Icon--menu"></i>\n    </div>\n    <ul class="ms-NavBar-items">\n        <li class="ms-NavBar-item ms-NavBar-item--search ms-u-hiddenSm">\n            <div class="ms-TextField">\n                <input class="ms-TextField-field" placeholder="Search...">\n            </div>\n        </li>\n        <li class="ms-NavBar-item" ng-class="{\'is-selected\': state.current.name == \'teams\'}" ng-click="state.go(\'teams\')">\n            <a class="ms-NavBar-link" ui-sref="teams">Teams</a>\n        </li>\n    </ul>\n</div>')}]),angular.module("app/templates/team.html",[]).run(["$templateCache",function(a){a.put("app/templates/team.html",'<div class="team" ng-if="ready">\n    <div class="header">\n        <span class="ms-font-xxl">{{name}}</span>\n    </div>\n    <div>\n        <div class="charts-container">\n            <div class="chart-holder">\n                <div class="chart-header">\n                    <span class="ms-font-xl">Group statistics</span>\n                </div>\n                <div id ="GroupPointsChart" class="chart-holder" ng-controller="GroupPointsController" ng-init="initialize(statisticsPromise)">\n                </div>\n            </div>\n            <div class="chart-holder">\n                <div class="chart-header">\n                    <span class="ms-font-xl">Games Summary</span>\n                </div>\n                <div id ="GamesSummaryChart" class="chart-holder" ng-controller="GamesSummaryController" ng-init="initialize(statisticsPromise)">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("app/templates/teams.html",[]).run(["$templateCache",function(a){a.put("app/templates/teams.html",'<div class=\'teams\'>\n    <div class="ms-PersonaCard" ng-repeat="team in teams" ng-click="selectTeam(team.idInternal)">\n        <div class="ms-PersonaCard-persona" ng-class="{\'is-selected\': (hightLightedTeam == team.idInternal)}">\n            <div class="ms-Persona">\n                <div class="ms-Persona-imageArea">\n                    <img class="ms-Persona-image" ng-src="https://images.onefootball.com/icons/teams/164/{{team.idInternal}}.png">\n                </div>\n                <div class="ms-Persona-details">\n                    <div class="ms-Persona-primaryText" title="{{team.name}}">{{team.name}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]);